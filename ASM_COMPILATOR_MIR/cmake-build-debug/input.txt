; координаты x,y,t точки по окр
push 0.1
pop dx

; ex -> r
; ax -> x
; bx -> y
; cx -> t

; Нач. знач.
push 50
push 50
push 0
push 0

pop cx
pop bx
pop ax
pop ex

start:
push cx
push 7
ja stop
pop
pop

push cx
cos
push ex
mul ax

push cx
sin
push ex
mul bx

push cx
push dx
add cx

; Вывод
push ax
out pop
push bx
out pop
push 3
pop [0]

; Сохраняю регистры
push ax
push bx
push cx
push dx
push ex

; Кладу xyRGB
push ax
push bx
push 0
push 255
push 0
call set_pix

pop ex
pop dx
pop cx
pop bx
pop ax



push 1
pop go
; Восстанавливаю регистры




; Задержка
push 3
pop [0]

jmp start

stop:
    pop
    pop
    exit


push 5.9      ;x
push 3      ;y
push 255    ;R
push 255    ;G
push 255    ;B
call set_pix
push 1
pop go
exit

push 10      ;x
push 3      ;y
push 0      ;R
push 0      ;G
push 255    ;B
call set_pix

push 1
pop go

exit

set_pix:
; Для глубины цвета 4
    pop rx
    pop nm
    pop dx  ;B
    pop cx  ;G
    pop bx  ;R
    pop ax  ;y

    push gw
    push 2
    push ax
    flr
    mul
    push 1
    add
    sub

    push gl
    push 2
    div
    mul ax
    flr
    push ax
    add ;теперь в стеке лежит n

    push 4
    mul
    push rms
    add ax ; Тут уже итоговый адрес для RAM (Он перейдёт в GDD)
    push ax
    push 1
    add ax
    ;out pop
    push dx ;   Кладём B
    out
    pop [ax]
    push cx ;   Кладём G
    out
    pop [ax + 1]
    push bx ;   Кладём R
    out
    pop [ax + 2]
    push 0 ;   Кладём A
    pop [ax + 3]

    push nm
    push rx
    ret

; координаты x,y,t точки по окр
push 0.1
pop dx

; ex -> r
; ax -> x
; bx -> y
; cx -> t

; Нач. знач.
push 50
push 50
push 0
push 0

pop cx
pop bx
pop ax
pop ex

start:
push cx
push 7
ja stop
pop
pop

push cx
cos
push ex
mul ax

push cx
sin
push ex
mul bx

push cx
push dx
add cx

; Вывод
push ax
out pop
push bx
out pop
push 3
pop [0]

; Сохраняю регистры
push ax
push bx
push cx
push dx
push ex

; Кладу xyRGB
push ax
push bx
push 0
push 255
push 0
call set_pix

pop ex
pop dx
pop cx
pop bx
pop ax



push 1
pop go
; Восстанавливаю регистры




; Задержка
push 3
pop [0]

jmp start

stop:
    pop
    pop
    exit


push 5.9      ;x
push 3      ;y
push 255    ;R
push 255    ;G
push 255    ;B
call set_pix
push 1
pop go
exit

push 10      ;x
push 3      ;y
push 0      ;R
push 0      ;G
push 255    ;B
call set_pix

push 1
pop go

exit

set_pix:
; Для глубины цвета 4
    pop rx
    pop nm
    pop dx  ;B
    pop cx  ;G
    pop bx  ;R
    pop ax  ;y

    push gw
    push 2
    push ax
    flr
    mul
    push 1
    add
    sub

    push gl
    push 2
    div
    mul ax
    flr
    push ax
    add ;теперь в стеке лежит n

    push 4
    mul
    push rms
    add ax ; Тут уже итоговый адрес для RAM (Он перейдёт в GDD)
    push ax
    push 1
    add ax
    ;out pop
    push dx ;   Кладём B
    out
    pop [ax]
    push cx ;   Кладём G
    out
    pop [ax + 1]
    push bx ;   Кладём R
    out
    pop [ax + 2]
    push 0 ;   Кладём A
    pop [ax + 3]

    push nm
    push rx
    ret

